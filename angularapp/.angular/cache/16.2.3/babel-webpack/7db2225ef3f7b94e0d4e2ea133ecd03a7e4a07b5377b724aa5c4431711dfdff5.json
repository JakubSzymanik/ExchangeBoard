{"ast":null,"code":"var _class;\nimport { take } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../_services/items.service\";\nimport * as i2 from \"../../_services/account.service\";\nimport * as i3 from \"../../_services/current-item-share.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../owned-item-card/owned-item-card.component\";\nfunction ItemPageComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-owned-item-card\", 2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"item\", item_r2);\n  }\n}\nfunction ItemPageComponent_p_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r3.name);\n  }\n}\nexport class ItemPageComponent {\n  constructor(itemService, accountService, currentItemShareService) {\n    this.itemService = itemService;\n    this.accountService = accountService;\n    this.currentItemShareService = currentItemShareService;\n    this.items = [];\n    this.userId = 0;\n    this.itemId = 0;\n  }\n  ngOnInit() {\n    //this.currentItemShareService.getItem.subscribe(v => this.item = v);\n    this.accountService.currentUser$.pipe(take(1)).subscribe({\n      next: user => this.userId = user?.id\n    });\n    this.currentItemShareService.getItem.subscribe(item => this.itemId = item?.id);\n    this.itemService.getMatchableItems(this.userId, this.itemId).subscribe(items => this.items = items);\n  }\n}\n_class = ItemPageComponent;\n_class.ɵfac = function ItemPageComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ItemsService), i0.ɵɵdirectiveInject(i2.AccountService), i0.ɵɵdirectiveInject(i3.CurrentItemShareService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-item-page\"]],\n  decls: 4,\n  vars: 4,\n  consts: [[4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"item\"]],\n  template: function ItemPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ItemPageComponent_div_0_Template, 2, 1, \"div\", 0);\n      i0.ɵɵpipe(1, \"async\");\n      i0.ɵɵelementStart(2, \"div\");\n      i0.ɵɵtemplate(3, ItemPageComponent_p_3_Template, 2, 1, \"p\", 1);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 2, ctx.currentItemShareService.getItem));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.items);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.OwnedItemCardComponent, i4.AsyncPipe],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["take","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","item_r2","ɵɵtext","ɵɵtextInterpolate","item_r3","name","ItemPageComponent","constructor","itemService","accountService","currentItemShareService","items","userId","itemId","ngOnInit","currentUser$","pipe","subscribe","next","user","id","getItem","item","getMatchableItems","ɵɵdirectiveInject","i1","ItemsService","i2","AccountService","i3","CurrentItemShareService","selectors","decls","vars","consts","template","ItemPageComponent_Template","rf","ctx","ɵɵtemplate","ItemPageComponent_div_0_Template","ItemPageComponent_p_3_Template","ɵɵpipeBind1"],"sources":["D:\\ProgrammingProjects\\ExchangeBoard\\angularapp\\src\\app\\items\\item-page\\item-page.component.ts","D:\\ProgrammingProjects\\ExchangeBoard\\angularapp\\src\\app\\items\\item-page\\item-page.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Item } from '../../_models/item';\r\nimport { ItemsService } from '../../_services/items.service';\r\nimport { CurrentItemShareService } from '../../_services/current-item-share.service';\r\nimport { AccountService } from '../../_services/account.service';\r\nimport { UserToken } from '../../_models/user-token';\r\nimport { take } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-item-page',\r\n  templateUrl: './item-page.component.html',\r\n  styleUrls: ['./item-page.component.css']\r\n})\r\nexport class ItemPageComponent {\r\n\r\n  constructor(private itemService: ItemsService, private accountService: AccountService, protected currentItemShareService: CurrentItemShareService) { }\r\n\r\n  items: Item[] = [];\r\n  userId: number = 0;\r\n  itemId: number = 0;\r\n\r\n  ngOnInit() {\r\n    //this.currentItemShareService.getItem.subscribe(v => this.item = v);\r\n    \r\n    this.accountService.currentUser$.pipe(take(1)).subscribe({\r\n      next: user => this.userId = user?.id as number\r\n    });\r\n    this.currentItemShareService.getItem.subscribe(item => this.itemId = item?.id as number)\r\n\r\n    this.itemService.getMatchableItems(this.userId, this.itemId).subscribe(items => this.items = items);\r\n  }\r\n}\r\n","<div *ngIf=\"(currentItemShareService.getItem | async) as item\">\n  <app-owned-item-card [item]=\"item\"></app-owned-item-card>\n</div>\n<div>\n  <p *ngFor=\"let item of items\">{{item.name}}</p>\n</div>\n"],"mappings":";AAMA,SAASA,IAAI,QAAQ,MAAM;;;;;;;;;ICN3BC,EAAA,CAAAC,cAAA,UAA+D;IAC7DD,EAAA,CAAAE,SAAA,6BAAyD;IAC3DF,EAAA,CAAAG,YAAA,EAAM;;;;IADiBH,EAAA,CAAAI,SAAA,GAAa;IAAbJ,EAAA,CAAAK,UAAA,SAAAC,OAAA,CAAa;;;;;IAGlCN,EAAA,CAAAC,cAAA,QAA8B;IAAAD,EAAA,CAAAO,MAAA,GAAa;IAAAP,EAAA,CAAAG,YAAA,EAAI;;;;IAAjBH,EAAA,CAAAI,SAAA,GAAa;IAAbJ,EAAA,CAAAQ,iBAAA,CAAAC,OAAA,CAAAC,IAAA,CAAa;;;ADS7C,OAAM,MAAOC,iBAAiB;EAE5BC,YAAoBC,WAAyB,EAAUC,cAA8B,EAAYC,uBAAgD;IAA7H,KAAAF,WAAW,GAAXA,WAAW;IAAwB,KAAAC,cAAc,GAAdA,cAAc;IAA4B,KAAAC,uBAAuB,GAAvBA,uBAAuB;IAExH,KAAAC,KAAK,GAAW,EAAE;IAClB,KAAAC,MAAM,GAAW,CAAC;IAClB,KAAAC,MAAM,GAAW,CAAC;EAJmI;EAMrJC,QAAQA,CAAA;IACN;IAEA,IAAI,CAACL,cAAc,CAACM,YAAY,CAACC,IAAI,CAACtB,IAAI,CAAC,CAAC,CAAC,CAAC,CAACuB,SAAS,CAAC;MACvDC,IAAI,EAAEC,IAAI,IAAI,IAAI,CAACP,MAAM,GAAGO,IAAI,EAAEC;KACnC,CAAC;IACF,IAAI,CAACV,uBAAuB,CAACW,OAAO,CAACJ,SAAS,CAACK,IAAI,IAAI,IAAI,CAACT,MAAM,GAAGS,IAAI,EAAEF,EAAY,CAAC;IAExF,IAAI,CAACZ,WAAW,CAACe,iBAAiB,CAAC,IAAI,CAACX,MAAM,EAAE,IAAI,CAACC,MAAM,CAAC,CAACI,SAAS,CAACN,KAAK,IAAI,IAAI,CAACA,KAAK,GAAGA,KAAK,CAAC;EACrG;;SAjBWL,iBAAiB;;mBAAjBA,MAAiB,EAAAX,EAAA,CAAA6B,iBAAA,CAAAC,EAAA,CAAAC,YAAA,GAAA/B,EAAA,CAAA6B,iBAAA,CAAAG,EAAA,CAAAC,cAAA,GAAAjC,EAAA,CAAA6B,iBAAA,CAAAK,EAAA,CAAAC,uBAAA;AAAA;;QAAjBxB,MAAiB;EAAAyB,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,2BAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCb9B1C,EAAA,CAAA4C,UAAA,IAAAC,gCAAA,iBAEM;;MACN7C,EAAA,CAAAC,cAAA,UAAK;MACHD,EAAA,CAAA4C,UAAA,IAAAE,8BAAA,eAA+C;MACjD9C,EAAA,CAAAG,YAAA,EAAM;;;MALAH,EAAA,CAAAK,UAAA,SAAAL,EAAA,CAAA+C,WAAA,OAAAJ,GAAA,CAAA5B,uBAAA,CAAAW,OAAA,EAAgD;MAIhC1B,EAAA,CAAAI,SAAA,GAAQ;MAARJ,EAAA,CAAAK,UAAA,YAAAsC,GAAA,CAAA3B,KAAA,CAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}